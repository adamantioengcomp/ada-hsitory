angular.module("history",[]).value("history",[]).value("status",{current:-1,goingBack:!1,goingForward:!1}).factory("History",["history","$location","status",function(r,n,t){return{back:function(n){t.goingBack=!0,t.current>0?t.current--:t.current=0;var o=r.length>0?r[t.current]:"/";for(i in n){var e=o.indexOf("?"+i+"=");if(0>e&&(e=o.indexOf("&"+i+"=")),e>-1){var c=o.substr(e+1);c.indexOf("&")>0&&(c=c.substr(0,c.indexOf("&"))),o=o.replace(c,i+"="+n[i])}else o+=o.indexOf("?")>-1?"&":"?",o+=i+"="+n[i]}window.location="#"+o},forward:function(){t.goingForward=!0,t.current>0&&t.current<r.length-1?t.current++:t.current=0;var o=r.length>0?r[t.current]:"/";n.path(o)},clear:function(){r=[]}}}]).run(["$rootScope","history","$location","status",function(r,n,t,o){r.$on("$routeChangeSuccess",function(){o.goingBack||o.goingForward?(o.goingBack=!1,o.goingForward=!1):(o.current++,n[o.current]=t.$$url)})}]);