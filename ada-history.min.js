angular.module("history",[]).value("history",[]).value("status",{current:-1,goingBack:!1,goingForward:!1}).factory("History",["history","$location","status",function(n,r,t){return{backTo:function(r,i){t.goingBack=!0;for(var e in n)if(n[e]==r){t.current=e;var o=r;break}if(o)for(e in i){var c=o.indexOf("?"+e+"=");if(0>c&&(c=o.indexOf("&"+e+"=")),c>-1){var a=o.substr(c+1);a.indexOf("&")>0&&(a=a.substr(0,a.indexOf("&"))),o=o.replace(a,e+"="+i[e])}else o+=o.indexOf("?")>-1?"&":"?",o+=e+"="+i[e]}window.location="#"+o},back:function(r){t.goingBack=!0,t.current>0?t.current--:t.current=0;var e=n.length>0?n[t.current]:"/";for(i in r){var o=e.indexOf("?"+i+"=");if(0>o&&(o=e.indexOf("&"+i+"=")),o>-1){var c=e.substr(o+1);c.indexOf("&")>0&&(c=c.substr(0,c.indexOf("&"))),e=e.replace(c,i+"="+r[i])}else e+=e.indexOf("?")>-1?"&":"?",e+=i+"="+r[i]}window.location="#"+e},forward:function(){t.goingForward=!0,t.current>0&&t.current<n.length-1?t.current++:t.current=0;var i=n.length>0?n[t.current]:"/";r.path(i)},clear:function(){t.current=0,n.splice(0,n.length)}}}]).run(["$rootScope","history","$location","status",function(n,r,i,t){var e=function(){t.goingBack||t.goingForward?(t.goingBack=!1,t.goingForward=!1):(t.current++,r[t.current]=i.$$url)};n.$on("$routeChangeSuccess",function(){e()}),n.$on("$stateChangeSuccess",function(){e()})}]);